include ../../form/label/label
include ../../form/dropdown/dropdown

mixin room-book(roomNumber, pricePerDay, discount, fee, options)
  - const blockName = 'room-book'
  - var feature = ''

  if options
    if options.feature
      - feature = options.feature

  div(class=blockName)
    div(class=[blockName+'__headline', 'clearfix'])
      div(class=blockName+'__number')
        span(class=blockName+'__number-sign')= '№'
        span(class=blockName+'__number-value')= roomNumber
        h3(class=[blockName+'__number-feature', 'h3', 'h3--purple'])= feature
      div(class=[blockName+'__price-per-day', 'body'])
        span(class=blockName+'__cost')!= pricePerDay.toLocaleString('ru-RU')+'₽&nbsp;'
        span(class=blockName+'__date-unit')= 'в сутки'
    div(class=[blockName+'__date-range', 'clearfix'])
      div(class=blockName+'__check-in')
        div(class=blockName+'__label')
          +label('Прибытие')
        div(class=blockName+'__dropdown')
          +dropdown(
            'room-book__check-in-date',
            {
              type: 'datepicker',
              emptyValue: '19.08.2019'
            }
          )
      div(class=blockName+'__check-out')
        div(class=blockName + '__label')
          +label('Выезд')
        div(class=blockName + '__dropdown')
          +dropdown(
            'room-book__check-out-date',
            {
              type: 'datepicker',
              emptyValue: '23.08.2019'
            }
          )
    div(class=blockName+'__guests')
      div(class=blockName+'__label')
        +label('Гости')
      div(class=blockName+'__dropdown')
        +dropdown(
          'room-book__check-in-date',
          {
            type: 'select-box',
            emptyValue: '3 гостя',
            data: [
              {count: 2, text: 'взрослые', name: 'adult'},
              {count: 1, text: 'дети', name: 'kids'},
              {count: 0, text: 'младенцы', name: 'baby'}
            ]
          }
        )
    table(class=blockName+'__result' cellspacing='0' cellpadding='0')
      tbody
        tr.body
          th(class=blockName+'__th')= pricePerDay.toLocaleString('ru-RU')+'₽ x 4 суток'
          td(class=blockName+'__td-icon')
          td(class=blockName+'__td')= (pricePerDay*4).toLocaleString('ru-RU')+'₽'
        tr.body
          th(class=blockName+'__th')= 'Сбор за услуги: скидка '+ discount.toLocaleString('ru-RU')+'₽'
          td(class=blockName+'__td-icon')
            i(class=blockName+'__info')= 'i'
          td(class=blockName+'__td')= '0₽'
        tr.body
          th(class=blockName+'__th')= 'Сбор за дополнительные услуги'
          td(class=blockName+'__td-icon')
            i(class=blockName+'__info')= 'i'
          td(class=blockName+'__td')= fee.toLocaleString('ru-RU')+'₽'
      tfoot
        tr(class=blockName+'__total')
          th(class=blockName+'__total-th')
            span(class=blockName+'__total-word')= 'Итого'
          td(class=blockName+'__total-line')
          td(class=blockName+'__total-td')
            span(class=blockName+'__total-value')= (pricePerDay*4-discount+fee).toLocaleString('ru-RU')+'₽'
    div(class=blockName+'__button')
      +button(
        'default',
        'Забронировать',
        {withArrow: true}
      )