include ../../label/label
include ../../dropdown/dropdown
include ../../dropdown-date-range/dropdown-date-range

mixin room-book(options)
  - var { roomNumber, pricePerDay, discount, fee, feature } = options || {}

  form.card.room-book
    header.room-book__header
      .room-book__number
        span.room-book__number-sign= '№'
        span.room-book__number-value= roomNumber
        if feature
          h3.room-book__number-feature.h3.h3--purple= feature
      .room-book__price-per-day.body
        span.room-book__cost= `${pricePerDay.toLocaleString('ru-RU')}₽`
        |&nbsp;
        span.room-book__date-unit= 'в сутки'

    .room-book__date-range
      +dropdown-date-range({
        id: 'room-book__check-in-out',
        from: '19.08.2019',
        to: '23.08.2019'
      })

    .room-book__guests
      .room-book__label
        +label({ label: 'Гости' })
      .room-book__dropdown
        +dropdown({
          id: 'room-book__from-date',
          value: '3 гостя',
          rows: [
            {count: 2, text: 'взрослые', name: 'adult'},
            {count: 1, text: 'дети', name: 'kids'},
            {count: 0, text: 'младенцы', name: 'baby'}
          ]
        })

    - const totalBruto = pricePerDay * 4
    - const totalNetto = totalBruto - discount + fee

    .room-book__table-result
      .grid-cell= `${pricePerDay.toLocaleString('ru-RU')}₽ x 4 суток`
      .grid-cell.grid-cell--info
      .grid-cell.grid-cell--sum= `${totalBruto.toLocaleString('ru-RU')}₽`

      .grid-cell= `Сбор за услуги: скидка ${discount.toLocaleString('ru-RU')}₽`
      .grid-cell.grid-cell--info
        i(title='change me').room-book__info-icon.material-icons= 'info_outline'
      .grid-cell.grid-cell--sum= '0₽'

      .grid-cell= 'Сбор за дополнительные услуги'
      .grid-cell.grid-cell--info
        i(title='change me').room-book__info-icon.material-icons= 'info_outline'
      .grid-cell.grid-cell--sum= `${fee.toLocaleString('ru-RU')}₽`

    p.room-book__total-row
      span.room-book__total-header= 'Итого'
      span.room-book__total-line
      span.room-book__total-sum= `${totalNetto.toLocaleString('ru-RU')}₽`

    footer.room-book__button
      +button({
        theme: 'default',
        caption: 'Забронировать',
        withArrow: true,
        isFluid: true,
      })