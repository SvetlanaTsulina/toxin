include ../../rate-button/rate-button

mixin room-thumb(options)
  - var b = 'room-thumb'
  -
    var {
      roomNumber,
      href='change-me',
      pricePerDay,
      feedbackCounter,
      rate,
      images,
      feature,
      focus
    } = options || {}

  - var blockModifiers = []

  if focus
    - blockModifiers.push('focus')

  - var f = require('../../js/functions')

  div(class=f.bem({b, m: blockModifiers})).card
    figure(class=`${b}__carousel-inner`)
      each image, inx in images
        - var bemObj = {b, e: 'carousel-image'}
        if inx === 0
          - bemObj.m = 'active'
        img(class=f.bem(bemObj) src=require(`../../img/${image.src}`) alt=image.alt)
      div(class=f.bem({b, e: 'carousel-control', m: 'prev'}))
        i.material-icons= 'keyboard_arrow_left'
      div(class=f.bem({b, e: 'carousel-control', m: 'next'}))
        i.material-icons= 'keyboard_arrow_left'
      ul(class=`${b}__carousel-indicators`)
        each _, inx in images
          - const classActive = (i === 0) ? `${b}__carousel-indicator--active` : '';
          - var bemObj = {b, e: 'carousel-indicator'}
          if inx === 0
            - bemObj.m = 'active'
          li(class=f.bem(bemObj))
    header(class=[`${b}__header`])
      a(class=`${b}__number` href=href)
        span(class=`${b}__number-sign`)= '№'
        span(class=`${b}__number-value`)= roomNumber
        h3(class=`${b}__number-feature`).h3.h3--purple= feature
      div(class=`${b}__price-per-day`).body
        span(class=`${b}__cost`)!= pricePerDay.toLocaleString('ru-RU') + '₽'
        |&nbsp;
        span(class=`${b}__date-unit`)= 'в сутки'
    footer(class=`${b}__footer`)
      div(class=`${b}__rate`)
        +rate-button({
          id: `${roomNumber}__rate`,
          base: 5,
          rate
        })
      p(class=`${b}__feedback-counter`)
        b= feedbackCounter
        |&nbsp;
        span= 'Отзывов'